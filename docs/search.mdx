---
keywords:
  - algolia
  - search
---

# æœç´¢

æœ‰å‡ ä¸ªé€‰é¡¹ï¼Œä½ å¯ä»¥ä½¿ç”¨æ·»åŠ æœç´¢åˆ°æ‚¨çš„ç½‘ç«™:

- ğŸ¥‡ [Algolia DocSearch](#using-algolia-docsearch) (**å®˜æ–¹**)
- ğŸ‘¥ [Typesense DocSearch](#using-typesense-docsearch)
- ğŸ‘¥ [æœ¬åœ°æœç´¢](#using-local-search)
- ğŸ‘¥ [ä½ è‡ªå·±çš„ `SearchBar` ç»„ä»¶](#using-your-own-search)

:::info

ğŸ¥‡ Docusaurus ä¸º[Algolia DocSearch](#using-algolia-docsearch)æä¾›ä¸€æµçš„æ”¯æŒ.

ğŸ‘¥ å…¶ä»–é€‰é¡¹**ç”±ç¤¾åŒºç»´æŠ¤**:è¯·å‘å„è‡ªçš„å­˜å‚¨åº“æŠ¥å‘Šé”™è¯¯ã€‚

:::

## ğŸ¥‡ ä½¿ç”¨ Algolia DocSearch {#using-algolia-docsearch}

Docusaurus æœ‰å®˜æ–¹æ”¯æŒ[Algolia DocSearch](https://docsearch.algolia.com).

è¿™é¡¹æœåŠ¡å¯¹ä»»ä½•å¼€æºé¡¹ç›®éƒ½æ˜¯å…è´¹çš„:åªè¦ç¡®ä¿é˜…è¯»äº†[æ¸…å•](https://docsearch.algolia.com/docs/who-can-apply/)å¹¶[ç”³è¯·åˆ° DocSearch ç¨‹åº](https://docsearch.algolia.com/apply)ã€‚

DocSearch æ¯å‘¨æŠ“å–ä½ çš„ç½‘ç«™ä¸€æ¬¡(æ—¶é—´è¡¨å¯ä»¥ä» web ç•Œé¢é…ç½®)ï¼Œå¹¶å°†æ‰€æœ‰å†…å®¹èšåˆåœ¨ Algolia ç´¢å¼•ä¸­ã€‚ç„¶åä½¿ç”¨ Algolia API ä»å‰ç«¯ç›´æ¥æŸ¥è¯¢è¯¥å†…å®¹ã€‚

å¦‚æœä½ çš„ç½‘ç«™[ä¸ç¬¦åˆ](https://docsearch.algolia.com/docs/who-can-apply)å…è´¹çš„ï¼Œæ‰˜ç®¡ç‰ˆæœ¬çš„ DocSearchï¼Œæˆ–è€…å¦‚æœä½ çš„ç½‘ç«™ä½äºé˜²ç«å¢™åé¢ï¼Œä¸æ˜¯å…¬å…±çš„ï¼Œé‚£ä¹ˆä½ å¯ä»¥[è¿è¡Œè‡ªå·±çš„](https://docsearch.algolia.com/docs/run-your-own/) DocSearch çˆ¬è™«ã€‚

:::note

é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocusaurus é¢„è®¾ç”Ÿæˆ Algolia çˆ¬è™«å¯ä»¥ä½¿ç”¨çš„[sitemap.xml](https://docusaurus.io/sitemap.xml)ã€‚

:::

:::info ä»è€ docsearch?

æ‚¨å¯ä»¥åœ¨[æˆ‘ä»¬çš„åšå®¢æ–‡ç« ](/blog/2021/11/21/algolia-docsearch-migration)æˆ–[DocSearch è¿ç§»æ–‡æ¡£](https://docsearch.algolia.com/docs/migrating-from-legacy)ä¸­é˜…è¯»æ›´å¤šå…³äºä»ä¼ ç»Ÿ DocSearch åŸºç¡€è®¾æ–½è¿ç§»çš„ä¿¡æ¯ã€‚

:::

### ç´¢å¼•é…ç½® {#algolia-index-configuration}

åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºè·å¾—æ‰¹å‡†å’Œéƒ¨ç½²åï¼Œæ‚¨å°†æ”¶åˆ°ä¸€å°ç”µå­é‚®ä»¶ï¼Œå…¶ä¸­åŒ…å«å°† DocSearch æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ã€‚ç¼–è¾‘å’Œç®¡ç†ä½ çš„çˆ¬è™«å¯ä»¥é€šè¿‡[web ç•Œé¢](https://crawler.algolia.com/)ã€‚ç´¢å¼•åœ¨éƒ¨ç½²åéšæ—¶å¯ç”¨ï¼Œå› æ­¤é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚

:::tip

å¼ºçƒˆå»ºè®®ä½¿ç”¨ç±»ä¼¼äº[**Docusaurus 2 ç½‘ç«™é…ç½®**](https://docsearch.algolia.com/docs/templates/#docusaurus-v2-template)çš„é…ç½®ã€‚

:::

### è¿æ¥ Algolia {#connecting-algolia}

Docusaurus è‡ªå·±çš„`@docusaurus/é¢„è®¾ç»å…¸`æ”¯æŒ Algolia DocSearch é›†æˆã€‚å¦‚æœä½¿ç”¨ç»å…¸é¢„è®¾ï¼Œåˆ™ä¸éœ€è¦é¢å¤–çš„å®‰è£…ã€‚

<details>
<summary>ä¸ä½¿ç”¨<code>@docusaurus/preset-classic</code>æ—¶çš„å®‰è£…æ­¥éª¤</summary>

1. å®‰è£…åŒ…:

```bash npm2yarn
npm install --save @docusaurus/theme-search-algolia
```

2. åœ¨`docusaurus.config.js`ä¸­æ³¨å†Œä¸»é¢˜ã€‚:

```js title="docusaurus.config.js"
module.exports = {
  title: "My site",
  // ...
  themes: ["@docusaurus/theme-search-algolia"],
  themeConfig: {
    // ...
  },
};
```

</details>

ç„¶åï¼Œåœ¨`themeConfig`ä¸­æ·»åŠ ä¸€ä¸ª`algolia`å­—æ®µã€‚**[ç”³è¯· DocSearch](https://docsearch.algolia.com/apply/)**è·å–æ‚¨çš„ Algolia ç´¢å¼•å’Œ API å¯†é’¥ã€‚

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      // The application ID provided by Algolia
      appId: "YOUR_APP_ID",

      // Public API key: it is safe to commit it
      apiKey: "YOUR_SEARCH_API_KEY",

      indexName: "YOUR_INDEX_NAME",

      // Optional: see doc section below
      contextualSearch: true,

      // Optional: Specify domains where the navigation should occur through window.location instead on history.push. Useful when our Algolia config crawls multiple documentation sites and we want to navigate with window.location.href to them.
      externalUrlRegex: "external\\.com|domain\\.com",

      // Optional: Replace parts of the item URLs from Algolia. Useful when using the same search index for multiple deployments using a different baseUrl. You can use regexp or string in the `from` param. For example: localhost:3000 vs myCompany.com/docs
      replaceSearchResultPathname: {
        from: "/docs/", // or as RegExp: /\/docs\//
        to: "/",
      },

      // Optional: Algolia search parameters
      searchParameters: {},

      // Optional: path for search page that enabled by default (`false` to disable it)
      searchPagePath: "search",

      //... other Algolia params
    },
    // highlight-end
  },
};
```

:::info

åœ¨ Docusaurus v1 ä¸­ï¼Œ`searchParameters`é€‰é¡¹æ›¾ç»è¢«å‘½åä¸º`algoliaOptions`ã€‚

å‚è€ƒå®ƒçš„[å®˜æ–¹ DocSearch æ–‡æ¡£](https://docsearch.algolia.com/docs/api#searchparameters)è·å–å¯èƒ½çš„å€¼ã€‚

:::

:::caution

åœ¨ Algolia æŠ“å–æ‚¨çš„ç«™ç‚¹ä¹‹å‰ï¼Œæœç´¢åŠŸèƒ½å°†æ— æ³•å¯é åœ°å·¥ä½œã€‚

å¦‚æœåœ¨ä»»ä½•é‡å¤§æ›´æ”¹åæœç´¢ä¸å·¥ä½œï¼Œè¯·ä½¿ç”¨ Algolia ä»ªè¡¨æ¿**è§¦å‘æ–°çš„æŠ“å–**ã€‚

:::

### ä¸Šä¸‹æ–‡æœç´¢ {#contextual-search}

ä¸Šä¸‹æ–‡æœç´¢æ˜¯**é»˜è®¤å¯ç”¨çš„**ã€‚

å®ƒç¡®ä¿æœç´¢ç»“æœä¸**å½“å‰è¯­è¨€å’Œç‰ˆæœ¬ç›¸å…³**ã€‚

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: true,
    },
    // highlight-end
  },
};
```

å‡è®¾æ‚¨æœ‰ä¸¤ä¸ªæ–‡æ¡£ç‰ˆæœ¬(**v1**å’Œ**v2**)å’Œä¸¤ç§è¯­è¨€(`en`å’Œ`fr`)ã€‚

åœ¨æµè§ˆ v2 æ–‡æ¡£æ—¶ï¼Œè¿”å› v1 æ–‡æ¡£çš„æœç´¢ç»“æœæ˜¯å¾ˆå¥‡æ€ªçš„ã€‚æœ‰æ—¶ v1 å’Œ v2 æ–‡æ¡£éå¸¸ç›¸ä¼¼ï¼Œæ‚¨æœ€ç»ˆä¼šå¾—åˆ°ç›¸åŒæŸ¥è¯¢çš„é‡å¤æœç´¢ç»“æœ(æ¯ä¸ªç‰ˆæœ¬ä¸€ä¸ªç»“æœ)ã€‚

åŒæ ·ï¼Œå½“æµè§ˆæ³•è¯­ç«™ç‚¹æ—¶ï¼Œè¿”å›è‹±æ–‡æ–‡æ¡£çš„æœç´¢ç»“æœä¹Ÿä¼šå¾ˆå¥‡æ€ªã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸Šä¸‹æ–‡æœç´¢åŠŸèƒ½çŸ¥é“æ‚¨æ­£åœ¨æµè§ˆç‰¹å®šçš„æ–‡æ¡£ç‰ˆæœ¬å’Œè¯­è¨€ï¼Œå¹¶å°†åŠ¨æ€åˆ›å»ºæœç´¢æŸ¥è¯¢è¿‡æ»¤å™¨ã€‚

- åœ¨`/en/docs/v1/myDoc`ä¸Šï¼Œæœç´¢ç»“æœå°†åªåŒ…æ‹¬**v1**æ–‡æ¡£çš„**è‹±æ–‡**ç»“æœ(+å…¶ä»–æœªç‰ˆæœ¬çš„é¡µé¢)
- åœ¨`/fr/docs/v2/myDoc`ä¸Šï¼Œæœç´¢ç»“æœå°†åªåŒ…æ‹¬**v2**ç‰ˆæœ¬çš„**æ³•è¯­**æ–‡æ¡£(+å…¶ä»–æœªç‰ˆæœ¬çš„é¡µé¢)

:::info

å½“ä½¿ç”¨`contextualSearch: true`(é»˜è®¤)æ—¶ï¼Œä¸Šä¸‹æ–‡ facet è¿‡æ»¤å™¨å°†ä¸`algolia.searchParameters.facetFilters`æä¾›çš„è¿‡æ»¤å™¨åˆå¹¶ã€‚

å¯¹äºç‰¹å®šçš„éœ€æ±‚ï¼Œä½ å¯ä»¥ç¦ç”¨`contextualSearch`å¹¶å®šä¹‰ä½ è‡ªå·±çš„`facetFilters`:

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: false,
      searchParameters: {
        facetFilters: ["language:en", ["filter1", "filter2"], "filter3"],
      },
    },
    // highlight-end
  },
};
```

å‚è€ƒç›¸å…³çš„[Algolia faceting æ–‡æ¡£](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/)ã€‚

:::

### æ ·å¼åŒ–ä½ çš„ Algolia æœç´¢ {#styling-your-algolia-search}

é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocSearch é™„å¸¦äº†ä¸€ä¸ªä¸ºå¯è®¿é—®æ€§è€Œè®¾è®¡çš„å¾®è°ƒä¸»é¢˜ï¼Œç¡®ä¿é¢œè‰²å’Œå¯¹æ¯”åº¦ç¬¦åˆæ ‡å‡†ã€‚

ä¸è¿‡ï¼Œä½ å¯ä»¥é€šè¿‡ç¼–è¾‘`/src/css/custom.css`æ–‡ä»¶æ¥é‡ç”¨ Docusaurus ä¸­çš„[Infima CSS å˜é‡](styling-layout.mdx#styling-your-site-with-infima)ã€‚

```css title="/src/css/custom.css"
[data-theme="light"] .DocSearch {
  /* --docsearch-primary-color: var(--ifm-color-primary); */
  /* --docsearch-text-color: var(--ifm-font-color-base); */
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(94, 100, 112, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-color-secondary-lighter);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-color-secondary);
  --docsearch-searchbox-focus-background: var(--ifm-color-white);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-white);
  /* Footer */
  --docsearch-footer-background: var(--ifm-color-white);
}

[data-theme="dark"] .DocSearch {
  --docsearch-text-color: var(--ifm-font-color-base);
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(47, 55, 69, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-background-color);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-background-color);
  --docsearch-searchbox-focus-background: var(--ifm-color-black);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-emphasis-100);
  /* Footer */
  --docsearch-footer-background: var(--ifm-background-surface-color);
  --docsearch-key-gradient: linear-gradient(
    -26.5deg,
    var(--ifm-color-emphasis-200) 0%,
    var(--ifm-color-emphasis-100) 100%
  );
}
```

### è‡ªå®šä¹‰ Algolia æœç´¢è¡Œä¸º {#customizing-the-algolia-search-behavior}

{/* TODO: update options link once the documentation is available on the DocSearch website */}

Algolia DocSearch æ”¯æŒ[é€‰é¡¹åˆ—è¡¨](https://autocomplete-experimental.netlify.app/docs/DocSearchModal#reference)ï¼Œæ‚¨å¯ä»¥å°†å…¶ä¼ é€’åˆ°`docusaurus.config.js`æ–‡ä»¶ä¸­çš„`Algolia`å­—æ®µã€‚

```js title="docusaurus.config.js"
module.exports = {
  themeConfig: {
    // ...
    algolia: {
      apiKey: "YOUR_API_KEY",
      indexName: "YOUR_INDEX_NAME",
      // Options...
    },
  },
};
```

### ç¼–è¾‘ Algolia æœç´¢ç»„ä»¶ {#editing-the-algolia-search-component}

å¦‚æœä½ å–œæ¬¢ç¼–è¾‘ Algolia æœç´¢ React ç»„ä»¶ï¼Œ[swizzle](swizzling.mdx) `@docusaurus/theme-search-algolia`ä¸­çš„`SearchBar`ç»„ä»¶:

```bash npm2yarn
npm run swizzle @docusaurus/theme-search-algolia SearchBar
```

### æ”¯æŒ {#algolia-support}

Algolia DocSearch å›¢é˜Ÿå¯ä»¥å¸®åŠ©ä½ æ‰¾å‡ºç½‘ç«™ä¸Šçš„æœç´¢é—®é¢˜ã€‚

æ‚¨å¯ä»¥é€šè¿‡[email](mailto:documentationsearch@algolia.com)æˆ–[Discord](https://discord.gg/tXdr5mP)ä¸ä»–ä»¬è”ç³»ã€‚

Docusaurus åœ¨[Discord](https://discordapp.com/invite/docusaurus)ä¸Šä¹Ÿæœ‰ä¸€ä¸ª`#algolia`é¢‘é“ã€‚

## ğŸ‘¥ ä½¿ç”¨ Typesense DocSearch {#using-typesense-docsearch}

[Typesense](https://typesense.org) DocSearch çš„å·¥ä½œåŸç†ç±»ä¼¼äº Algolia DocSearchï¼Œé™¤äº†ä½ çš„ç½‘ç«™è¢«ç´¢å¼•åˆ°ä¸€ä¸ª Typesense æœç´¢é›†ç¾¤ã€‚

Typesense æ˜¯ä¸€ä¸ª[å¼€æº](https://github.com/typesense/typesense)å³æ—¶æœç´¢å¼•æ“ï¼Œä½ å¯ä»¥:

- [Self-Host](https://typesense.org/docs/latest/guide/install-typesense.html#option-2-local-machine-self-hosting)åœ¨æ‚¨è‡ªå·±çš„æœåŠ¡å™¨æˆ–
  â€”ä½¿ç”¨ Managed [Typesense Cloud](https://cloud.typesense.org)æœåŠ¡ã€‚

ä¸ Algolia DocSearch ç±»ä¼¼ï¼Œæœ‰ä¸¤ä¸ªç»„ä»¶:

- [Typesense -docsearch-scraper](https://github.com/typesense/typesense-docsearch-scraper) -å®ƒæŠ“å–ä½ çš„ç½‘ç«™å¹¶ç´¢å¼•ä½ çš„ Typesense é›†ç¾¤ä¸­çš„æ•°æ®ã€‚
- [docusaurus-theme-search-typesense](https://github.com/typesense/docusaurus-theme-search-typesense) -ä¸€ä¸ªæœç´¢æ  UI ç»„ä»¶æ·»åŠ åˆ°æ‚¨çš„ç½‘ç«™ã€‚

é˜…è¯»å¦‚ä½•[åœ¨è¿™é‡Œè¿è¡Œ typesense-docsearch-scraper](https://typesense.org/docs/latest/guide/docsearch.html#step-1-set-up-docsearch-scraper)å’Œå¦‚ä½•[åœ¨è¿™é‡Œå®‰è£… Docusaurus ç«™ç‚¹çš„æœç´¢æ ](https://typesense.org/docs/latest/guide/docsearch.html#option-a-docusaurus-powered-sites)çš„é€æ­¥æ¼”ç»ƒã€‚

## ğŸ‘¥ ä½¿ç”¨æœ¬åœ°æœç´¢ {#using-local-search}

æ‚¨å¯ä»¥ä½¿ç”¨æœ¬åœ°æœç´¢æ’ä»¶ï¼Œæœç´¢ç´¢å¼•å°çš„ç½‘ç«™ï¼Œå¯ä»¥ä¸‹è½½åˆ°ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå½“ä»–ä»¬è®¿é—®æ‚¨çš„ç½‘ç«™ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ç¤¾åŒºæ”¯æŒçš„[æœ¬åœ°æœç´¢æ’ä»¶åˆ—è¡¨](https://docusaurus.io/community/resources#search)ã€‚

## ğŸ‘¥ ä½¿ç”¨è‡ªå·±çš„æœç´¢ {#using-your-own-search}

è¦ä½¿ç”¨è‡ªå·±çš„æœç´¢ï¼Œè¯·åœ¨`@docusaurus/theme-classic`ä¸­åŠ å…¥`SearchBar`ç»„ä»¶ã€‚

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic SearchBar
```

è¿™å°†åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª`src/themes/SearchBar`æ–‡ä»¶ã€‚é‡æ–°å¯åŠ¨æ‚¨çš„å¼€å‘æœåŠ¡å™¨å¹¶ç¼–è¾‘ç»„ä»¶ï¼Œæ‚¨å°†çœ‹åˆ° Docusaurus ç°åœ¨ä½¿ç”¨æ‚¨è‡ªå·±çš„`SearchBar`ç»„ä»¶ã€‚

**æ³¨**:æ‚¨å¯ä»¥é€‰æ‹©[swizzle from Algolia SearchBar](#editing-the-algolia-search-component)ï¼Œå¹¶ä»é‚£é‡Œåˆ›å»ºè‡ªå·±çš„æœç´¢ç»„ä»¶ã€‚
