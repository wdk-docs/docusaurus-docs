"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[68388],{2036:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>c,metadata:()=>r,toc:()=>a});var s=t(85893),i=t(11151);const c={sidebar_position:2},o="\u6269\u5927\u57fa\u7840\u8bbe\u65bd",r={unversionedId:"api/plugin-methods/extend-infrastructure",id:"api/plugin-methods/extend-infrastructure",title:"\u6269\u5927\u57fa\u7840\u8bbe\u65bd",description:"Docusaurus \u6709\u4e00\u4e9b\u57fa\u7840\u8bbe\u65bd\uff0c\u5982\u70ed\u91cd\u65b0\u52a0\u8f7d\u3001CLI \u548c swizzling\uff0c\u53ef\u4ee5\u901a\u8fc7\u5916\u90e8\u63d2\u4ef6\u8fdb\u884c\u6269\u5c55\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/api/plugin-methods/extend-infrastructure.mdx",sourceDirName:"api/plugin-methods",slug:"/api/plugin-methods/extend-infrastructure",permalink:"/docusaurus-docs/docs/next/api/plugin-methods/extend-infrastructure",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/api/plugin-methods/extend-infrastructure.mdx",tags:[],version:"current",lastUpdatedBy:"wohugb@aliyun.com",lastUpdatedAt:1693467116,formattedLastUpdatedAt:"2023\u5e748\u670831\u65e5",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"api",previous:{title:"\u751f\u547d\u5468\u671f APIs",permalink:"/docusaurus-docs/docs/next/api/plugin-methods/lifecycle-apis"},next:{title:"I18n \u751f\u547d\u5468\u671f",permalink:"/docusaurus-docs/docs/next/api/plugin-methods/i18n-lifecycles"}},d={},a=[{value:"<code>getPathsToWatch()</code>",id:"getPathsToWatch",level:2},{value:"<code>extendCli(cli)</code>",id:"extendCli",level:2},{value:"<code>getThemePath()</code>",id:"getThemePath",level:2},{value:"<code>getTypeScriptThemePath()</code>",id:"getTypeScriptThemePath",level:2},{value:"<code>getSwizzleComponentList()</code>",id:"getSwizzleComponentList",level:2}];function h(e){const n=Object.assign({h1:"h1",p:"p",h2:"h2",code:"code",pre:"pre",a:"a",admonition:"admonition",strong:"strong"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"\u6269\u5927\u57fa\u7840\u8bbe\u65bd",children:"\u6269\u5927\u57fa\u7840\u8bbe\u65bd"}),"\n",(0,s.jsx)(n.p,{children:"Docusaurus \u6709\u4e00\u4e9b\u57fa\u7840\u8bbe\u65bd\uff0c\u5982\u70ed\u91cd\u65b0\u52a0\u8f7d\u3001CLI \u548c swizzling\uff0c\u53ef\u4ee5\u901a\u8fc7\u5916\u90e8\u63d2\u4ef6\u8fdb\u884c\u6269\u5c55\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"getPathsToWatch",children:(0,s.jsx)(n.code,{children:"getPathsToWatch()"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6307\u5b9a\u8981\u76d1\u89c6\u63d2\u4ef6\u548c\u4e3b\u9898\u7684\u8def\u5f84\u3002\u8fd9\u4e9b\u8def\u5f84\u7531\u5f00\u53d1\u670d\u52a1\u5668\u76d1\u89c6\uff0c\u8fd9\u6837\u5f53\u76d1\u89c6\u8def\u5f84\u4e2d\u7684\u5185\u5bb9\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u63d2\u4ef6\u7684\u751f\u547d\u5468\u671f\u5c31\u4f1a\u91cd\u65b0\u52a0\u8f7d\u3002\u8bf7\u6ce8\u610f\uff0c\u63d2\u4ef6\u548c\u4e3b\u9898\u6a21\u5757\u6700\u521d\u662f\u7528 Node \u4e2d\u7684",(0,s.jsx)(n.code,{children:"context"}),"\u548c",(0,s.jsx)(n.code,{children:"options"}),"\u6765\u8c03\u7528\u7684\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u6765\u67e5\u627e\u6709\u5173\u7ad9\u70b9\u7684\u5fc5\u8981\u76ee\u5f55\u4fe1\u606f\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u5c06\u6b64\u7528\u4e8e\u670d\u52a1\u5668\u7aef\u4f7f\u7528\u7684\u6587\u4ef6\uff0c\u56e0\u4e3a\u4e3b\u9898\u6587\u4ef6\u7531 Webpack \u5f00\u53d1\u670d\u52a1\u5668\u81ea\u52a8\u76d1\u89c6\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u4f8b\u5b50:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus-plugin/src/index.js"',children:'const path = require("path");\nmodule.exports = function (context, options) {\n  return {\n    name: "docusaurus-plugin",\n    // highlight-start\n    getPathsToWatch() {\n      const contentPath = path.resolve(context.siteDir, options.path);\n      return [`${contentPath}/**/*.{ts,tsx}`];\n    },\n    // highlight-end\n  };\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"extendCli",children:(0,s.jsx)(n.code,{children:"extendCli(cli)"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6ce8\u518c\u4e00\u4e2a\u989d\u5916\u7684\u547d\u4ee4\u6765\u589e\u5f3a Docusaurus \u7684 CLI\u3002",(0,s.jsx)(n.code,{children:"cli"}),"\u662f\u4e00\u4e2a",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/commander/v/5.1.0",children:"commander"}),"\u5bf9\u8c61\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"commander \u7248\u672c\u5f88\u91cd\u8981!\u6211\u4eec\u4f7f\u7528 commander v5\uff0c\u5e76\u786e\u4fdd\u60a8\u5f15\u7528\u4e86\u6b63\u786e\u7684\u7248\u672c\u6587\u6863\u4ee5\u83b7\u53d6\u53ef\u7528\u7684 api\u3002"})}),"\n",(0,s.jsx)(n.p,{children:"\u4f8b\u5b50:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus-plugin/src/index.js"',children:'module.exports = function (context, options) {\n  return {\n    name: "docusaurus-plugin",\n    // highlight-start\n    extendCli(cli) {\n      cli\n        .command("roll")\n        .description("Roll a random number between 1 and 1000")\n        .action(() => {\n          console.log(Math.floor(Math.random() * 1000 + 1));\n        });\n    },\n    // highlight-end\n  };\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"getThemePath",children:(0,s.jsx)(n.code,{children:"getThemePath()"})}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd4\u56de\u4e3b\u9898\u7ec4\u4ef6\u6240\u5728\u76ee\u5f55\u7684\u8def\u5f84\u3002\u5f53\u4f60\u7684\u7528\u6237\u8c03\u7528",(0,s.jsx)(n.code,{children:"swizzle"}),"\u65f6\uff0c",(0,s.jsx)(n.code,{children:"getThemePath"}),"\u88ab\u8c03\u7528\uff0c\u5b83\u8fd4\u56de\u7684\u8def\u5f84\u88ab\u7528\u6765\u627e\u5230\u4f60\u7684\u4e3b\u9898\u7ec4\u4ef6\u3002\u76f8\u5bf9\u8def\u5f84\u662f\u6839\u636e\u5305\u542b\u5165\u53e3\u70b9\u7684\u6587\u4ef6\u5939\u89e3\u6790\u7684\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4f8b\u5982\uff0c\u4f60\u7684",(0,s.jsx)(n.code,{children:"getThemePath"}),"\u53ef\u4ee5\u662f:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="my-theme/src/index.js"',children:'const path = require("path");\n\nmodule.exports = function (context, options) {\n  return {\n    name: "my-theme",\n    // highlight-start\n    getThemePath() {\n      return "./theme";\n    },\n    // highlight-end\n  };\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"getTypeScriptThemePath",children:(0,s.jsx)(n.code,{children:"getTypeScriptThemePath()"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0e",(0,s.jsx)(n.code,{children:"getThemePath()"}),"\u7c7b\u4f3c\uff0c\u5b83\u5e94\u8be5\u8fd4\u56de TypeScript \u4e3b\u9898\u7ec4\u4ef6\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\u7684\u8def\u5f84\u3002\u8fd9\u4e2a\u8def\u5f84\u7eaf\u7cb9\u662f\u7528\u6765\u6df7\u5408 TypeScript \u4e3b\u9898\u7ec4\u4ef6\u7684\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8def\u5f84\u4e0b\u7684\u4e3b\u9898\u7ec4\u4ef6\u4e0d\u4f1a\u88ab Webpack \u89e3\u6790\u3002\u56e0\u6b64\uff0c\u5b83\u4e0d\u80fd\u66ff\u4ee3",(0,s.jsx)(n.code,{children:"getThemePath()"}),"\u3002\u901a\u5e38\uff0c\u4f60\u53ef\u4ee5\u8ba9",(0,s.jsx)(n.code,{children:"getTypeScriptThemePath()"}),"\u8fd4\u56de\u7684\u8def\u5f84\u662f\u4f60\u7684\u6e90\u76ee\u5f55\uff0c\u8ba9",(0,s.jsx)(n.code,{children:"getThemePath()"}),"\u8fd4\u56de\u7684\u8def\u5f84\u662f\u7f16\u8bd1\u540e\u7684 JavaScript \u8f93\u51fa\u3002"]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"\u5bf9\u4e8e TypeScript \u4e3b\u9898\u4f5c\u8005:\u5f3a\u70c8\u5efa\u8bae\u4f60\u5c3d\u53ef\u80fd\u8ba9\u7f16\u8bd1\u540e\u7684\u8f93\u51fa\u5177\u6709\u4eba\u7c7b\u53ef\u8bfb\u6027\u3002\u53ea\u5220\u9664\u7c7b\u578b\u6ce8\u91ca\uff0c\u4e0d\u8981\u7ffb\u8bd1\u4efb\u4f55\u8bed\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c06\u7531 Webpack \u7684 Babel \u52a0\u8f7d\u5668\u6839\u636e\u76ee\u6807\u6d4f\u89c8\u5668\u7248\u672c\u6765\u5904\u7406\u3002"}),(0,s.jsx)(n.p,{children:"\u60a8\u8fd8\u5e94\u8be5\u4f7f\u7528 Prettier \u683c\u5f0f\u5316\u8fd9\u4e9b\u6587\u4ef6\u3002\u8bb0\u4f4f\u2014\u2014js \u6587\u4ef6\u53ef\u4ee5\u800c\u4e14\u5c06\u4f1a\u88ab\u4f60\u7684\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u3002"})]}),"\n",(0,s.jsx)(n.p,{children:"\u4f8b\u5b50:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="my-theme/src/index.js"',children:'const path = require("path");\n\nmodule.exports = function (context, options) {\n  return {\n    name: "my-theme",\n    // highlight-start\n    getThemePath() {\n      // Where compiled JavaScript output lives\n      return "../lib/theme";\n    },\n    getTypeScriptThemePath() {\n      // Where TypeScript source code lives\n      return "../src/theme";\n    },\n    // highlight-end\n  };\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"getSwizzleComponentList",children:(0,s.jsx)(n.code,{children:"getSwizzleComponentList()"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8fd9\u662f\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u4e0d\u9644\u52a0\u5230\u4efb\u4f55\u63d2\u4ef6\u5b9e\u4f8b\u3002"})}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd4\u56de\u88ab\u8ba4\u4e3a\u53ef\u4ee5\u5b89\u5168\u6405\u62cc\u7684\u7a33\u5b9a\u7ec4\u4ef6\u5217\u8868\u3002\u8fd9\u4e9b\u90e8\u4ef6\u5c06\u662f\u53ef\u6405\u62cc\u7684\uff0c\u6ca1\u6709",(0,s.jsx)(n.code,{children:"--danger"}),"\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7ec4\u4ef6\u90fd\u88ab\u8ba4\u4e3a\u4e0d\u7a33\u5b9a\u3002\u5982\u679c\u8fd4\u56de\u7a7a\u6570\u7ec4\uff0c\u5219\u8ba4\u4e3a\u6240\u6709\u7ec4\u4ef6\u90fd\u4e0d\u7a33\u5b9a\u3002\u5982\u679c\u8fd4\u56de",(0,s.jsx)(n.code,{children:"undefined"}),"\uff0c\u5219\u8ba4\u4e3a\u6240\u6709\u7ec4\u4ef6\u90fd\u662f\u7a33\u5b9a\u7684\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="my-theme/src/index.js"',children:'const swizzleAllowedComponents = [\n  "CodeBlock",\n  "DocSidebar",\n  "Footer",\n  "NotFound",\n  "SearchBar",\n  "hooks/useTheme",\n  "prism-include-languages",\n];\n\nmyTheme.getSwizzleComponentList = () => swizzleAllowedComponents;\n'})})]})}const l=function(e={}){const{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(h,e)})):h(e)}},11151:(e,n,t)=>{t.d(n,{Zo:()=>r,ah:()=>c});var s=t(67294);const i=s.createContext({});function c(e){const n=s.useContext(i);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const o={};function r({components:e,children:n,disableParentContext:t}){let r;return r=t?"function"==typeof e?e({}):e||o:c(e),s.createElement(i.Provider,{value:r},n)}}}]);