"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[29785],{16052:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});var r=n(85893),o=n(11151);const t={description:"How to keep a reasonable bundle size while ensuring sufficient browser support."},i="\u6d4f\u89c8\u5668\u652f\u6301",a={unversionedId:"browser-support",id:"browser-support",title:"\u6d4f\u89c8\u5668\u652f\u6301",description:"How to keep a reasonable bundle size while ensuring sufficient browser support.",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/browser-support.mdx",sourceDirName:".",slug:"/browser-support",permalink:"/docusaurus-docs/docs/next/browser-support",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/docusaurus-v2/zh-CN",tags:[],version:"current",lastUpdatedBy:"wohugb@aliyun.com",lastUpdatedAt:1693467116,formattedLastUpdatedAt:"2023\u5e748\u670831\u65e5",frontMatter:{description:"How to keep a reasonable bundle size while ensuring sufficient browser support."},sidebar:"docs",previous:{title:"\u641c\u7d22",permalink:"/docusaurus-docs/docs/next/search"},next:{title:"SEO",permalink:"/docusaurus-docs/docs/next/seo"}},l={},c=[{value:"Purpose",id:"purpose",level:2},{value:"Default values",id:"default-values",level:2},{value:"Read more",id:"read-more",level:2}];function d(e){const s=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",pre:"pre",code:"code",admonition:"admonition",ul:"ul",li:"li",em:"em"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"\u6d4f\u89c8\u5668\u652f\u6301",children:"\u6d4f\u89c8\u5668\u652f\u6301"}),"\n",(0,r.jsxs)(s.p,{children:["Docusaurus \u5141\u8bb8\u7ad9\u70b9\u901a\u8fc7",(0,r.jsx)(s.a,{href:"https://github.com/browserslist/browserslist",children:"browserslist \u914d\u7f6e"}),"\u5b9a\u4e49\u652f\u6301\u7684\u6d4f\u89c8\u5668\u5217\u8868\u3002"]}),"\n",(0,r.jsx)(s.h2,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsx)(s.p,{children:"\u7f51\u7ad9\u9700\u8981\u5728\u5411\u540e\u517c\u5bb9\u6027\u548c\u5305\u5927\u5c0f\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\u3002\u7531\u4e8e\u65e7\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u73b0\u4ee3 api \u6216\u8bed\u6cd5\uff0c\u56e0\u6b64\u9700\u8981\u66f4\u591a\u4ee3\u7801\u6765\u5b9e\u73b0\u76f8\u540c\u7684\u529f\u80fd\u3002"}),"\n",(0,r.jsxs)(s.p,{children:["\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining",children:"\u53ef\u9009\u94fe\u63a5\u8bed\u6cd5"}),":)"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"const value = obj?.prop?.val;\n"})}),"\n",(0,r.jsx)(s.p,{children:"...which unfortunately is only recognized by browser versions released after 2020. To be compatible with earlier browser versions, when building your site for production, our JS loader will transpile your code to a more verbose syntax:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"var _obj, _obj$prop;\n\nconst value =\n  (_obj = obj) === null || _obj === void 0\n    ? void 0\n    : (_obj$prop = _obj.prop) === null || _obj$prop === void 0\n    ? void 0\n    : _obj$prop.val;\n"})}),"\n",(0,r.jsx)(s.p,{children:"However, this penalizes all other users with increased site load time because the 29-character line now becomes 168 characters\u2014a 6-fold increase! (In practice, it will be better because the names used will be shorter.) As a tradeoff, the JS loader only transpiles the syntax to the degree that's supported by all browser versions defined in the browser list."}),"\n",(0,r.jsxs)(s.p,{children:["The browser list by default is provided through the ",(0,r.jsx)(s.code,{children:"package.json"})," file as a root ",(0,r.jsx)(s.code,{children:"browserslist"})," field."]}),"\n",(0,r.jsx)(s.admonition,{type:"caution",children:(0,r.jsx)(s.p,{children:"On old browsers, the compiled output will use unsupported (too recent) JS syntax, causing React to fail to initialize and end up with a static website with only HTML/CSS and no JS."})}),"\n",(0,r.jsx)(s.h2,{id:"default-values",children:"Default values"}),"\n",(0,r.jsxs)(s.p,{children:["Websites initialized with the default classic template has the following in ",(0,r.jsx)(s.code,{children:"package.json"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'title="package.json"',children:'{\n  "name": "docusaurus",\n  // ...\n  // highlight-start\n  "browserslist": {\n    "production": [">0.5%", "not dead", "not op_mini all"],\n    "development": ["last 1 chrome version", "last 1 firefox version", "last 1 safari version"]\n  }\n  // highlight-end\n  // ...\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:"Explained in natural language, the browsers supported in production are those:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["With more than 0.5% of market share; ",(0,r.jsx)(s.em,{children:"and"})]}),"\n",(0,r.jsxs)(s.li,{children:['Has official support or updates in the past 24 months (the opposite of "dead"); ',(0,r.jsx)(s.em,{children:"and"})]}),"\n",(0,r.jsx)(s.li,{children:"Is not Opera Mini."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"And browsers used in development are:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["The latest version of Chrome ",(0,r.jsx)(s.em,{children:"or"})," Firefox ",(0,r.jsx)(s.em,{children:"or"})," Safari."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:['You can "evaluate" any config with the ',(0,r.jsx)(s.code,{children:"browserslist"})," CLI to obtain the actual list:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'npx browserslist --env="production"\n'})}),"\n",(0,r.jsx)(s.p,{children:"The output is all browsers supported in production. Below is the output in January 2022:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"and_chr 96\nand_uc 12.12\nchrome 96\nchrome 95\nchrome 94\nedge 96\nfirefox 95\nfirefox 94\nie 11\nios_saf 15.2\nios_saf 15.0-15.1\nios_saf 14.5-14.8\nios_saf 14.0-14.4\nios_saf 12.2-12.5\nopera 82\nopera 81\nsafari 15.1\nsafari 14.1\nsafari 13.1\n"})}),"\n",(0,r.jsx)(s.h2,{id:"read-more",children:"Read more"}),"\n",(0,r.jsxs)(s.p,{children:["You may wish to visit the ",(0,r.jsx)(s.a,{href:"https://github.com/browserslist/browserslist/blob/main/README.md",children:"browserslist documentation"})," for more specifications, especially the accepted ",(0,r.jsx)(s.a,{href:"https://github.com/browserslist/browserslist/blob/main/README.md#queries",children:"query values"})," and ",(0,r.jsx)(s.a,{href:"https://github.com/browserslist/browserslist/blob/main/README.md#best-practices",children:"best practices"}),"."]})]})}const u=function(e={}){const{wrapper:s}=Object.assign({},(0,o.ah)(),e.components);return s?(0,r.jsx)(s,Object.assign({},e,{children:(0,r.jsx)(d,e)})):d(e)}},11151:(e,s,n)=>{n.d(s,{Zo:()=>a,ah:()=>t});var r=n(67294);const o=r.createContext({});function t(e){const s=r.useContext(o);return r.useMemo((()=>"function"==typeof e?e(s):{...s,...e}),[s,e])}const i={};function a({components:e,children:s,disableParentContext:n}){let a;return a=n?"function"==typeof e?e({}):e||i:t(e),r.createElement(o.Provider,{value:a},s)}}}]);