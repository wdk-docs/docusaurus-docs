"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[3769],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>g});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),u=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(a),m=n,g=c["".concat(l,".").concat(m)]||c[m]||d[m]||o;return a?r.createElement(g,s(s({ref:t},p),{},{components:a})):r.createElement(g,s({ref:t},p))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,s=new Array(o);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:n,s[1]=i;for(var u=2;u<o;u++)s[u]=a[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},66221:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>h,frontMatter:()=>l,metadata:()=>p,toc:()=>d});var r=a(87462),n=(a(67294),a(3905)),o=a(45687),s=a(55863),i=a(14181);const l={title:"Docusaurus 2.4",authors:["slorber"],tags:["release"],image:"./img/social-card.png",date:new Date("2023-03-23T00:00:00.000Z")},u=void 0,p={permalink:"/blog/releases/2.4",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/releases/2.4/index.mdx",source:"@site/blog/releases/2.4/index.mdx",title:"Docusaurus 2.4",description:"\u6211\u4eec\u5f88\u9ad8\u5174\u5730\u5ba3\u5e03Docusaurus 2.4\u3002",date:"2023-03-23T00:00:00.000Z",formattedDate:"2023\u5e743\u670823\u65e5",tags:[{label:"release",permalink:"/blog/tags/release"}],readingTime:3.285,hasTruncateMarker:!0,authors:[{name:"S\xe9bastien Lorber",title:"Docusaurus maintainer",url:"https://sebastienlorber.com",twitter:"sebastienlorber",email:"lorber.sebastien@gmail.com",imageURL:"https://github.com/slorber.png",key:"slorber"}],frontMatter:{title:"Docusaurus 2.4",authors:["slorber"],tags:["release"],image:"./img/social-card.png",date:"2023-03-23T00:00:00.000Z"},nextItem:{title:"Docusaurus 2.3",permalink:"/blog/releases/2.3"}},c={image:a(86891).Z,authorsImageUrls:[void 0]},d=[{value:"\u7a81\u51fa\u4e86",id:"\u7a81\u51fa\u4e86",level:2},{value:"\u4fa7\u8fb9\u680f\u9879\u76ee\u8bf4\u660e",id:"\u4fa7\u8fb9\u680f\u9879\u76ee\u8bf4\u660e",level:3},{value:"\u4e3b\u9898\u67e5\u8be2\u5b57\u7b26\u4e32",id:"\u4e3b\u9898\u67e5\u8be2\u5b57\u7b26\u4e32",level:3},{value:"\u5907\u6ce8 plugin npm2yarn \u5347\u7ea7",id:"\u5907\u6ce8-plugin-npm2yarn-\u5347\u7ea7",level:3},{value:"gtag \u652f\u6301\u591a\u4e2a\u8ddf\u8e2a IDs",id:"gtag-\u652f\u6301\u591a\u4e2a\u8ddf\u8e2a-ids",level:3},{value:"\u5f00\u53d1\u4eba\u5458\u7684\u7ecf\u9a8c",id:"\u5f00\u53d1\u4eba\u5458\u7684\u7ecf\u9a8c",level:3},{value:"\u7ffb\u8bd1",id:"\u7ffb\u8bd1",level:3},{value:"\u5176\u4ed6\u7684\u53d8\u5316",id:"\u5176\u4ed6\u7684\u53d8\u5316",level:2}],m={toc:d},g="wrapper";function h(e){let{components:t,...l}=e;return(0,n.kt)(g,(0,r.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"\u6211\u4eec\u5f88\u9ad8\u5174\u5730\u5ba3\u5e03",(0,n.kt)("strong",{parentName:"p"},"Docusaurus 2.4"),"\u3002"),(0,n.kt)("p",null,"\u5347\u7ea7\u5e94\u8be5\u5f88\u5bb9\u6613:\u6b63\u5982\u6211\u4eec\u7684",(0,n.kt)("a",{parentName:"p",href:"/community/release-process"},"\u53d1\u5e03\u8fc7\u7a0b\u6587\u6863"),"\u4e2d\u6240\u89e3\u91ca\u7684\u90a3\u6837\uff0c\u6b21\u8981\u7248\u672c\u5c0a\u91cd",(0,n.kt)("a",{parentName:"p",href:"https://semver.org/"},"\u8bed\u4e49\u7248\u672c\u63a7\u5236"),"\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Docusaurus blog post social card",src:a(86891).Z,width:"1200",height:"600"})),(0,n.kt)("h2",{id:"\u7a81\u51fa\u4e86"},"\u7a81\u51fa\u4e86"),(0,n.kt)("h3",{id:"\u4fa7\u8fb9\u680f\u9879\u76ee\u8bf4\u660e"},"\u4fa7\u8fb9\u680f\u9879\u76ee\u8bf4\u660e"),(0,n.kt)("p",null,"In ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/pull/8236"},"#8236"),", we made it possible to provide a new ",(0,n.kt)("inlineCode",{parentName:"p"},"description")," attribute for docs sidebar items of type ",(0,n.kt)("inlineCode",{parentName:"p"},"link")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"category"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="sidebars.js"',title:'"sidebars.js"'},'[\n  {\n    type: "link",\n    label: "Link with description",\n    href: "https://docusaurus.io",\n    // highlight-next-line\n    description: "Some link description",\n  },\n  {\n    type: "category",\n    label: "Category with description",\n    // highlight-next-line\n    description: "Some category description",\n    items: [],\n  },\n];\n')),(0,n.kt)("p",null,"These descriptions will be used in category generated index pages."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Show sidebar category generated index with custom descriptions",src:a(9325).Z,width:"1400",height:"691"})),(0,n.kt)("h3",{id:"\u4e3b\u9898\u67e5\u8be2\u5b57\u7b26\u4e32"},"\u4e3b\u9898\u67e5\u8be2\u5b57\u7b26\u4e32"),(0,n.kt)("p",null,"In ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/pull/8708"},"#8708"),", we added the possibility to force Docusaurus to initialize itself in ",(0,n.kt)("inlineCode",{parentName:"p"},"light")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"dark")," mode through a new ",(0,n.kt)("inlineCode",{parentName:"p"},"docusaurus-theme")," query-string parameter."),(0,n.kt)("p",null,"This is useful to ensure a consistent theme when embedding an existing Docusaurus page into an iframe or WebView."),(0,n.kt)(s.Z,{url:"/docs/?docusaurus-theme=light",mdxType:"IframeWindow"}),(0,n.kt)(s.Z,{url:"/docs/?docusaurus-theme=dark",mdxType:"IframeWindow"}),(0,n.kt)("h3",{id:"\u5907\u6ce8-plugin-npm2yarn-\u5347\u7ea7"},"\u5907\u6ce8 plugin npm2yarn \u5347\u7ea7"),(0,n.kt)("p",null,"In ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/pull/8690"},"#8690"),", we upgraded our Remark plugin ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/tree/main/packages/docusaurus-remark-plugin-npm2yarn"},"@docusaurus/remark-plugin-npm2yarn")," with many conversion bug fixes, first-class support for pnpm, and the ability to register custom converters producing new tabs."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"Run these commands!\n\n```bash npm2yarn\nnpm install\nnpm run build\nnpm run myCustomScript -- --some-arg\n```\n")),(0,n.kt)(o.Z,{mdxType:"BrowserWindow"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash",metastring:"npm2yarn",npm2yarn:!0},"npm install\nnpm run build\nnpm run myCustomScript -- --some-arg\n"))),(0,n.kt)("h3",{id:"gtag-\u652f\u6301\u591a\u4e2a\u8ddf\u8e2a-ids"},"gtag \u652f\u6301\u591a\u4e2a\u8ddf\u8e2a IDs"),(0,n.kt)("p",null,"In ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/pull/8620"},"#8620")," we added support for the ",(0,n.kt)("a",{parentName:"p",href:"/docs/api/plugins/@docusaurus/plugin-google-gtag"},"@docusaurus/plugin-google-gtag")," plugin to declare multiple tracking IDs."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="docusaurus.config.js"',title:'"docusaurus.config.js"'},'module.exports = {\n  presets: [\n    [\n      "@docusaurus/preset-classic",\n      {\n        gtag: {\n          trackingID: [\n            // highlight-next-line\n            "G-<YOUR-NEW-GA4-ID>",\n            // highlight-next-line\n            "UA-<YOUR-OLD-UA-ID>",\n          ],\n        },\n      },\n    ],\n  ],\n};\n')),(0,n.kt)("admonition",{title:"Google is sunsetting Universal Analytics",type:"caution"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"https://blog.google/products/marketingplatform/analytics/prepare-for-future-with-google-analytics-4/"},"Google will sunset its Universal Analytics"))," on ",(0,n.kt)("strong",{parentName:"p"},"July 1, 2023"),"."),(0,n.kt)("p",{parentName:"admonition"},"Docusaurus users should migrate to Google Analytics 4. Google ",(0,n.kt)("strong",{parentName:"p"},"does not permit to migrate your existing Universal Analytics data")," to your new Google Analytics 4 property."),(0,n.kt)("p",{parentName:"admonition"},"To preserve the continuity of your analytics, we temporarily recommend that you report events to 2 tracking IDs at the same time: the old one (",(0,n.kt)("inlineCode",{parentName:"p"},"UA-*"),") and new one (",(0,n.kt)("inlineCode",{parentName:"p"},"G-*"),"). Refer to the ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/facebook/docusaurus/issues/7221"},"dedicated issue"))," for details.")),(0,n.kt)("h3",{id:"\u5f00\u53d1\u4eba\u5458\u7684\u7ecf\u9a8c"},"\u5f00\u53d1\u4eba\u5458\u7684\u7ecf\u9a8c"),(0,n.kt)("p",null,"In ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/pull/8736"},"#8736"),", we improved how we render error messages and added initial support to render the full causal chain of an error (see ",(0,n.kt)("a",{parentName:"p",href:"https://h3manth.com/ES2022/#error-cause"},"ES2022 Error Cause"),")."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"To see it in action, click here: ",(0,n.kt)(i.Z,{cause:"Probably undefined is not a function \ud83d\ude04",mdxType:"ErrorBoundaryTestButton"}))),(0,n.kt)("p",null,"In ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/pull/8735"},"#8735")," we also made navbar-related error messages clearer to help users understand what they did wrong."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Docusaurus navbar error message screenshot",src:a(99401).Z,width:"1676",height:"1614"})),(0,n.kt)("h3",{id:"\u7ffb\u8bd1"},"\u7ffb\u8bd1"),(0,n.kt)("p",null,"We made it possible to translate some new elements:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8677"},"#8677")," introduces a new ",(0,n.kt)("inlineCode",{parentName:"li"},"process.env.DOCUSAURUS_CURRENT_LOCALE")," (experimental) allowing you to localize your config file, including site title, tagline, announcement bar, baseUrl..."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8616"},"#8616")," allows to translate the navbar and footer logo alt text")),(0,n.kt)("p",null,"We added default theme translation support for multiple languages:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\ud83c\udded\ud83c\uddfa ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8668"},"#8668"),": Hungarian"),(0,n.kt)("li",{parentName:"ul"},"\ud83c\uddf3\ud83c\uddf4 ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8631"},"#8631"),": Norwegian (Bokm\xe5l)")),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"Completing theme translations is an ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/issues/3526"},"ongoing effort")," and an easy way to contribute to Docusaurus. We add new theme features regularly, for which we often ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/issues/3526"},"need new translations"),".")),(0,n.kt)("h2",{id:"\u5176\u4ed6\u7684\u53d8\u5316"},"\u5176\u4ed6\u7684\u53d8\u5316"),(0,n.kt)("p",null,"Other notable changes include:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8674"},"#8674"),": respect ",(0,n.kt)("inlineCode",{parentName:"li"},"prefers-reduced-motion: reduce")," media query"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8712"},"#8712"),": use a navbar item of type ",(0,n.kt)("inlineCode",{parentName:"li"},"docSidebar")," in template"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8801"},"#8801"),": allow tabs children to be falsy"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8757"},"#8757"),": make search page react to external query-string changes"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8803"},"#8803"),": fix code block buttons position in RTL"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8615"},"#8615"),": fix color mode toggle when using dark navbar"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/facebook/docusaurus/pull/8699"},"#8699"),": fix navbar dropdown tab focus bug")),(0,n.kt)("p",null,"Check the ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"/changelog/2.4.0"},"2.4.0 changelog entry"))," for an exhaustive list of changes."))}h.isMDXComponent=!0},55863:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(67294),n=a(45687);function o(e){let{url:t}=e;return r.createElement("div",{style:{padding:10}},r.createElement(n.Z,{url:t,style:{minWidth:"min(100%,45vw)",width:800,maxWidth:"100%",overflow:"hidden"},bodyStyle:{padding:0}},r.createElement("iframe",{src:t,title:t,style:{display:"block",width:"100%",height:300}})))}},45687:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(67294),n=a(86010);const o={browserWindow:"browserWindow_my1Q",browserWindowHeader:"browserWindowHeader_jXSR",row:"row_KZDM",buttons:"buttons_uHc7",right:"right_oyze",browserWindowAddressBar:"browserWindowAddressBar_Pd8y",dot:"dot_giz1",browserWindowMenuIcon:"browserWindowMenuIcon_Vhuh",bar:"bar_rrRL",browserWindowBody:"browserWindowBody_Idgs"};function s(e){let{children:t,minHeight:a,url:s="http://localhost:3000",style:i,bodyStyle:l}=e;return r.createElement("div",{className:o.browserWindow,style:{...i,minHeight:a}},r.createElement("div",{className:o.browserWindowHeader},r.createElement("div",{className:o.buttons},r.createElement("span",{className:o.dot,style:{background:"#f25f58"}}),r.createElement("span",{className:o.dot,style:{background:"#fbbe3c"}}),r.createElement("span",{className:o.dot,style:{background:"#58cb42"}})),r.createElement("div",{className:(0,n.Z)(o.browserWindowAddressBar,"text--truncate")},s),r.createElement("div",{className:o.browserWindowMenuIcon},r.createElement("div",null,r.createElement("span",{className:o.bar}),r.createElement("span",{className:o.bar}),r.createElement("span",{className:o.bar})))),r.createElement("div",{className:o.browserWindowBody,style:l},t))}},14181:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(67294);function n(e){let{children:t="Boom!",message:a="Boom!\nSomething bad happened, but you can try again!",cause:n}=e;const[o,s]=(0,r.useState)(!1);if(o)throw new Error(a,{cause:n?new Error(n):void 0});return r.createElement("button",{className:"button button--danger",type:"button",onClick:()=>s(!0)},t)}},99401:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/navbar-error-15eefab8e8d77aa4d605939956987164.jpg"},9325:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/sidebar-item-description-f38981b17f486bc09fb811c6992ef668.jpg"},86891:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/social-card-3239a62bb56c9529ff255bc2c72e94f6.png"}}]);