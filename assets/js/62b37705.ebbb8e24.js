"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[8901],{33035:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>u,toc:()=>l});var a=n(87462),r=(n(67294),n(3905)),s=n(31866);const o={},i="\u91d1\u4e1d\u96c0\u7684\u7248\u672c",u={unversionedId:"canary",id:"canary",title:"\u91d1\u4e1d\u96c0\u7684\u7248\u672c",description:"Docusaurus \u6709\u4e00\u4e2a\u91ca\u653e\u91d1\u4e1d\u96c0\u7684\u7cfb\u7edf\u3002",source:"@site/community/4-canary.mdx",sourceDirName:".",slug:"/canary",permalink:"/community/canary",draft:!1,tags:[],version:"current",lastUpdatedBy:"wohugb@aliyun.com",lastUpdatedAt:1693363249,formattedLastUpdatedAt:"2023\u5e748\u670830\u65e5",sidebarPosition:4,frontMatter:{},sidebar:"community",previous:{title:"\u8d21\u732e",permalink:"/community/contributing"},next:{title:"\u53d1\u5e03\u8fc7\u7a0b",permalink:"/community/release-process"}},c={},l=[{value:"\u91d1\u4e1d\u96c0 npm dist \u6807\u7b7e",id:"\u91d1\u4e1d\u96c0-npm-dist-\u6807\u7b7e",level:2},{value:"\u4f7f\u7528\u91d1\u4e1d\u96c0\u91ca\u653e\u5668",id:"\u4f7f\u7528\u91d1\u4e1d\u96c0\u91ca\u653e\u5668",level:2}],p={toc:l},m="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u91d1\u4e1d\u96c0\u7684\u7248\u672c"},"\u91d1\u4e1d\u96c0\u7684\u7248\u672c"),(0,r.kt)(s.mC,{mdxType:"VersionsProvider"},(0,r.kt)("p",null,"Docusaurus \u6709\u4e00\u4e2a\u91ca\u653e\u91d1\u4e1d\u96c0\u7684\u7cfb\u7edf\u3002"),(0,r.kt)("p",null,"\u5b83\u5141\u8bb8\u4f60\u5728\u5408\u5e76\u5230 Docusaurus \u7684",(0,r.kt)("a",{parentName:"p",href:"/community/release-process#next-version"},"\u4e0b\u4e00\u4e2a\u7248\u672c"),"\u65f6\u6d4b\u8bd5\u65b0\u7684\u672a\u53d1\u5e03\u7684\u7279\u6027\u3002"),(0,r.kt)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u7ed9\u7ef4\u62a4\u8005\u53cd\u9988\u7684\u597d\u65b9\u6cd5\uff0c\u786e\u4fdd\u65b0\u5b9e\u73b0\u7684\u529f\u80fd\u6309\u9884\u671f\u5de5\u4f5c\u3002"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u91d1\u4e1d\u96c0\u7248\u672c\u4f3c\u4e4e\u6709\u98ce\u9669\uff0c\u4f46\u5728\u5b9e\u8df5\u4e2d\u5374\u5e76\u975e\u5982\u6b64\u3002"),(0,r.kt)("p",{parentName:"admonition"},"\u91d1\u4e1d\u96c0\u7248\u672c\u901a\u8fc7\u4e86\u6240\u6709\u81ea\u52a8\u5316\u6d4b\u8bd5\uff0c\u5e76\u7531 Docusaurus \u7ad9\u70b9\u672c\u8eab\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002")),(0,r.kt)(s.UM,{mdxType:"InsertIfCanaryVersionUnknown"},(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"\u4e0b\u9762\u663e\u793a\u7684\u91d1\u4e1d\u96c0\u7248\u672c\u53ef\u80fd\u4e0d\u662f\u6700\u65b0\u7684\u3002\u8bf7\u5230",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@docusaurus/core?activeTab=versions"},"npm \u9875\u9762"),"\u627e\u5230\u5b9e\u9645\u7684\u7248\u672c\u540d\u79f0\u3002"))),(0,r.kt)(s.FS,{mdxType:"InsertIfCanaryVersionKnown"},(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The canary version shown below is directly fetched from npm and ",(0,r.kt)("strong",{parentName:"p"},"is up-to-date"),". You can directly use these numbers in your package.json."))),(0,r.kt)("h2",{id:"\u91d1\u4e1d\u96c0-npm-dist-\u6807\u7b7e"},"\u91d1\u4e1d\u96c0 npm dist \u6807\u7b7e"),(0,r.kt)("p",null,"For any code-related commit on ",(0,r.kt)("inlineCode",{parentName:"p"},"main"),", the continuous integration will publish a canary release under the ",(0,r.kt)("inlineCode",{parentName:"p"},"@canary")," npm dist tag. It generally takes up to 10 minutes."),(0,r.kt)("p",null,"You can see on ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@docusaurus/core?activeTab=versions"},"npm")," the current dist tags:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"latest"),": stable releases (Current: ",(0,r.kt)(s.SR,{mdxType:"StableVersion"}),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"canary"),": canary releases (",(0,r.kt)(s.I1,{mdxType:"CanaryVersion"}),")")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Make sure to use the latest canary release and check the publication date (sometimes the publish process fails). ",(0,r.kt)(s.rv,{mdxType:"PublishTime"}))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Canary versions follow the naming convention ",(0,r.kt)("inlineCode",{parentName:"p"},"0.0.0-commitNumber"),".")),(0,r.kt)("h2",{id:"\u4f7f\u7528\u91d1\u4e1d\u96c0\u91ca\u653e\u5668"},"\u4f7f\u7528\u91d1\u4e1d\u96c0\u91ca\u653e\u5668"),(0,r.kt)("p",null,"Take the latest version published under the ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@docusaurus/core?activeTab=versions"},"canary npm dist tag")," (",(0,r.kt)(s.I1,{mdxType:"CanaryVersion"}),")."),(0,r.kt)("p",null,"Use it for all the ",(0,r.kt)("inlineCode",{parentName:"p"},"@docusaurus/*")," dependencies in your ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json"),":"),(0,r.kt)(s.Hc,{mdxType:"PackageJSONDiff"}),(0,r.kt)("p",null,"Then, install the dependencies again and start your site:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"npm2yarn",npm2yarn:!0},"npm install\nnpm start\n")),(0,r.kt)("p",null,"You can also upgrade the ",(0,r.kt)("inlineCode",{parentName:"p"},"@docusaurus/*")," packages with command line:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"npm2yarn",npm2yarn:!0},"npm install --save-exact @docusaurus/core@canary @docusaurus/preset-classic@canary\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Make sure to include all the ",(0,r.kt)("inlineCode",{parentName:"p"},"@docusaurus/*")," packages."),(0,r.kt)("p",{parentName:"admonition"},"For canary releases, prefer using an exact version instead of a semver range (avoid the ",(0,r.kt)("inlineCode",{parentName:"p"},"^")," prefix)."))))}d.isMDXComponent=!0},31866:(e,t,n)=>{n.d(t,{CW:()=>k,FS:()=>N,Fr:()=>h,Hc:()=>b,I1:()=>m,SR:()=>d,UM:()=>g,Zl:()=>f,mC:()=>l,mq:()=>v,rv:()=>C});var a=n(67294),r=n(86409),s=n(89871),o=n(97325),i=n(83699),u=n(14526);const c=a.createContext(null);function l(e){let{children:t}=e;const[n,r]=(0,a.useState)(null),s=(0,a.useRef)(!0);return(0,a.useEffect)((()=>(s.current=!0,()=>{s.current=!1})),[]),(0,a.useEffect)((()=>{fetch("https://registry.npmjs.org/@docusaurus/core").then((e=>e.json())).then((e=>{if(!s.current)return;const t=Object.keys(e.versions).at(-1),n=e.time[t];r({name:t,time:n})}))}),[]),a.createElement(c.Provider,{value:n},t)}function p(){const e=(0,r.J)("default").preferredVersion?.name,t=(0,s.gB)("default"),n=(t.find((e=>"current"!==e.name))??t[0]).name;return e&&"current"!==e?e:n}function m(){const e=(0,a.useContext)(c);return e?a.createElement("span",null,a.createElement(o.Z,{description:"The hint text for the current canary version tag.",values:{canaryVersionName:a.createElement("b",null,e.name)}},"Current: {canaryVersionName}")):a.createElement("span",null,a.createElement(o.Z,{description:"An example canary version tag when the actual version can't be fetched."},"Example: 0.0.0-4922"))}function d(){const e=p();return a.createElement("span",null,e)}function k(){return a.createElement("span",null,3)}function h(){return a.createElement("span",null,2)}function y(e){let{branch:t}=e;return a.createElement(i.Z,{to:`https://github.com/facebook/docusaurus/tree/${t}`},a.createElement("code",null,t))}function f(){return a.createElement(y,{branch:"docusaurus-v2"})}function v(){return a.createElement(y,{branch:"main"})}function g(e){let{children:t}=e;return(0,a.useContext)(c)?null:t}function N(e){let{children:t}=e;return(0,a.useContext)(c)?t:null}function b(){const e=(0,a.useContext)(c)?.name??"0.0.0-4922",t=p();return a.createElement(u.Z,{language:"diff"},`-  "@docusaurus/core": "^${t}",\n-  "@docusaurus/preset-classic": "^${t}",\n+  "@docusaurus/core": "${e}",\n+  "@docusaurus/preset-classic": "${e}",\n`)}function C(){const e=(0,a.useContext)(c)?.time;return e?a.createElement(o.Z,{values:{time:a.createElement("b",null,new Date(e).toLocaleString())}},"The latest canary version that's available on npm is published at {time}."):null}},14526:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),r=n(92053);function s(e){return a.createElement(r.Z,e)}}}]);